{"code":"!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";function s(t,e,i){const s=i?document.getElementById(i):document.createElement(\"canvas\");return s.width=t,s.height=e,s.ctx=s.getContext(\"2d\"),s}i.r(e);const a=[[\"#dd4e54\",\"#ff5960\",\"#4b3733\",\"#5d433e\",\"#ead94c\",\"#4a3632\"],[\"#2c5460\",\"#3a7080\",\"#2c5460\",\"#67bd39\",\"#bcdc2f\",\"#59a331\"],[\"#2184d5\",\"#3399cc\",\"#10456d\",\"#3a4750\",\"#f3f3f3\",\"#303841\"],[\"#ffd944\",\"#ffe580\",\"#d7c745\",\"#49b47e\",\"#94dd4d\",\"#409f6e\"]],r=12,n=13,l=14,c=[[[\"M 0 0 16 0 16 16 0 16\",0]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 3 8, A 5 5 0 1 1 13 8, A 5 5 0 1 1 3 8\",4],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",3]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 5 8, A 3 3 0 1 1 11 8, A 3 3 0 1 1 5 8\",4]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 3 8, A 5 5 0 1 1 13 8, A 5 5 0 1 1 3 8\",4],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",3],[\"M 5 8, A 3 3 0 1 1 11 8, A 3 3 0 1 1 5 8\",4]],[[\"M 0 0 16 0 16 16 0 16\",1],[\"M 0 1 16 1 16 16 0 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 4, A 4 4 0 0 1 4 0, L 16 0 16 16 0 16\",1],[\"M 1 4, A 3 3 0 0 1 4 1, L 16 1 16 16 1 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 12 0, A 4 4 0 0 1 16 4, L 16 16 0 16 0 0\",1],[\"M 12 1, A 3 3 0 0 1 15 4, L 15 16 0 16 0 1\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 4, A 4 4 0 0 1 4 0, L 12 0, A 4 4 0 0 1 16 4, L 16 16 0 16\",1],[\"M 1 4, A 3 3 0 0 1 4 1, L 12 1, A 3 3 0 0 1 15 4, L 15 16 1 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 16 16 0 16 16\",1],[\"M 1 16 16 1 16 16\",0],[\"M 6 16 16 6 16 16\",4],[\"M 8 16 16 8 16 16\",3],[\"M 12 16 16 12 16 16\",5]],[[\"M 0 0 0 0 16 0 16 16 0 16\",1],[\"M 0 1 1 0 16 0 16 16 0 16\",0],[\"M 0 6 6 0 16 0 16 16 0 16\",4],[\"M 0 8 8 0 16 0 16 16 0 16\",3],[\"M 0 12 12 0 16 0 16 16 0 16\",5]],[[\"M 0 0 16 16 0 16\",1],[\"M 0 1 15 16 0 16\",0],[\"M 0 6 10 16 0 16\",4],[\"M 0 8 8 16 0 16\",3],[\"M 0 12 4 16 0 16\",5]],[[\"M 0 0 0 0 16 0 16 16 0 16\",1],[\"M 15 0 16 1 16 16 0 16 0 0\",0],[\"M 10 0 16 6 16 16 0 16 0 0\",4],[\"M 8 0 16 8 16 16 0 16 0 0\",3],[\"M 4 0 16 12 16 16 0 16 0 0\",5]],[[\"M 0 2, Q 4 0 8 2, Q 12 4 16 2, L 16 16 0 16\",4],[\"M 0 3, Q 4 1 8 3, Q 12 5 16 3, L 16 16 0 16\",1],[\"M 0 8, Q 4 6 8 8, Q 12 10 16 8, L 16 16 0 16\",0]],[[\"M 7 8 9 8 9 16 7 16\",5],[\"M 5 9, A 3 6 0 1 1 11 9, A 3 4 0 1 1 5 9\",1],[\"M 8 16, A 6 6 0 0 0 14 10, L 8 14\",5],[\"M 8 15, A 6 6 0 0 1 2 8, L 8 13\",5]],[[\"M 7 0 9 0 9 16 7 16\",5]]],h=[[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 5 8, A 1 1 0 1 1 7 8, A 1 1 0 1 1 5 8, M 9 8, A 1 1 0 1 1 11 8, A 1 1 0 1 1 9 8\",4]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8, A 1 1 0 1 1 7 8, M 9 8, A 1 1 0 1 1 11 8\",4]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 5 8, A 1 1 0 1 1 7 8, A 1 1 0 1 1 5 8, M 9 8, A 1 1 0 1 1 11 8, A 1 1 0 1 1 9 8\",4]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8, A 1 1 0 1 1 7 8, M 9 8, A 1 1 0 1 1 11 8\",4]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8, A 1 1 0 1 1 7 8\",5]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8\",5]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8, A 1 1 0 1 1 7 8\",5]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8\",5]]];let o=[5,4,6];function d(t,e){let i=s(e.tileWidth*o.length,e.tileHeight);for(var a in o){let s=t*e.tileWidth,r=o[a]*e.tileHeight,n=a*e.tileWidth,l=0;i.ctx.drawImage(e.img,s,r,e.tileWidth,e.tileHeight,n,l,e.tileWidth,e.tileHeight)}return i}function g(t,e){let i=s(e.tileWidth,e.tileHeight),a=t*e.tileWidth,r=e.sec1Rows*e.tileHeight;return i.ctx.drawImage(e.img,a,r,e.tileWidth,e.tileHeight,0,0,e.tileWidth,e.tileHeight),i}function m(t,e,i){let a=i.tileWidth,r=i.tileHeight,c=s(a,r*(e+1)),h=t*a,o=n*r;c.ctx.drawImage(i.img,h,o,a,r,0,0,a,r),o=l*r;for(var d=0;d<e;d++)c.ctx.drawImage(i.img,h,o,a,r,0,(1+d)*r,a,r);return c}function f(t,e,i){return\"A\"===t?t+e.map((t,e)=>e<2||e>4?t*i:t).join(\" \"):t+e.map(t=>t*i).join(\" \")}function M(t,e,i,s){t.fillStyle=i;let a=e.split(\",\");for(var r=0;r<a.length;r++){let t=a[r].trim().split(\" \"),e=t.shift();a[r]=f(e,t,s)}t.fill(new Path2D(a.join(\" \")))}function u(t,e,i,s){for(var a in e)M(t,e[a][0],i[e[a][1]],s)}class p{constructor(t){this.raf=null,this.setState(t)}setState(t){this.state=t}start(){this.now=performance.now(),this.last=this.now,this.elapsed=0,this.accumulator=0,requestAnimationFrame(this.update.bind(this))}stop(){cancelAnimationFrame(this.raf)}update(){if(this.raf=requestAnimationFrame(this.update.bind(this)),this.now=performance.now(),this.elapsed=this.now-this.last,this.last=this.now,!(this.elapsed>1e3)){for(this.state.prepare(),this.accumulator+=this.elapsed;this.accumulator>=1e3/60;)this.state.update(1/60*10),this.accumulator-=1e3/60;this.state.render()}}}let w=[];const A={standard:[\"A\",\"B\",\"X\",\"Y\",\"L1\",\"R1\",\"L2\",\"R2\",\"SELECT\",\"START\",\"PRESS1\",\"PRESS2\",\"UP\",\"DOWN\",\"LEFT\",\"RIGHT\",\"MODE\"]};function x(t){w[t.gamepad.index]={device:t.gamepad,mapping:A[t.gamepad.mapping]||A.standard,cache:[],status:[]},console.log(\"Gamepad %i connected\",t.gamepad.index)}function v(t){delete w[t.gamepad.index],console.log(\"Gamepad %i disconnected\",t.gamepad.index)}function y(t,e=!1,i=0){if(!w[i])return!1;t=t.toUpperCase();let s=w[i],a=s.status.includes(t);return!e&&s.cache.includes(t)&&(a=!1),a}class b{constructor(t){window.addEventListener(\"gamepadconnected\",x),window.addEventListener(\"gamepaddisconnected\",v),this.game=t,this.waveSpeed=100;let e=this.game,i={tilesX:Math.ceil(e.offscreen.width/e.tw),tilesY:2};i.img=s(i.tilesX*e.tw,i.tilesY*e.th),i.img.ctx.fillStyle=a[e.colors][0],i.img.ctx.fillRect(0,e.th,i.img.width,i.img.height);for(var n=0;n<i.tilesX;n++){let t=e.colors*e.tw,s=r*e.th,a=n*e.tw,l=0;i.img.ctx.drawImage(e.tileset.img,t,s,e.tw,e.th,a,l,e.tw,e.th)}this.wave=i,this.waveX=0,this.waveY=e.offscreen.height-i.img.height}prepare(){}update(t){!function(){for(var t in w){let i=w[t];i.cache=[...i.status],i.status=[];for(var e=0;e<i.device.buttons.length;e++)i.device.buttons[e].pressed&&i.status.push(i.mapping[e])}}(),function(t=0){if(!w[t])return!1;let e=w[t];for(var i in e.mapping){let s=e.mapping[i];y(s,!1,t)&&console.log(s)}}();for(var e=0;e<4;e++){let i=this.game.players[e];i.active&&(i.y+=i.vy*t,i.vy+=9*t,i.y>this.game.platforms[e].y-this.game.th&&(i.y=this.game.platforms[e].y-this.game.th))}}render(){let t=this.game,e=t.offscreen,i=t.cam;e.ctx.fillStyle=this.game.bg,e.ctx.fillRect(0,0,e.width,e.height),e.ctx.drawImage(this.wave.img,this.waveX,this.waveY);for(var s=0;s<4;s++){e.ctx.save(),!1===t.players[s].active&&(e.ctx.globalAlpha=.25),e.ctx.drawImage(t.platforms[s].img,t.platforms[s].x,t.platforms[s].y);let i=t.trees[s].img.width,a=(t.trees[s].segments+1)*t.th,r=t.trees[s].x,n=t.trees[s].y;e.ctx.drawImage(t.trees[s].img,0,0,i,a,r,n,i,a),e.ctx.drawImage(t.players[s].img,t.players[s].x,t.players[s].y),e.ctx.restore()}t.screen.ctx.drawImage(e,i.sx,i.sy,i.sw,i.sh,i.dx,i.dy,i.dw,i.dh)}}const H={colors:0,bg:\"#52427a\",scale:4,tilesH:64,tilesV:20};H.tileset=function(t){let e=a.length,i={tileWidth:16*t,tileHeight:16*t,columns:e,sec1Rows:c.length,sec2Rows:h.length/4};i.width=i.tileWidth*i.columns,i.rows=i.sec1Rows+i.sec2Rows,i.height=i.tileHeight*i.rows,i.img=s(i.width,i.height);for(var r=0;r<c.length;r++)for(var n=0;n<e;n++){let e=n*i.tileWidth,s=r*i.tileHeight;i.img.ctx.save(),i.img.ctx.translate(e,s),u(i.img.ctx,c[r],a[n],t),i.img.ctx.restore()}for(var l=0;l<4;l++){let e=l*i.tileWidth,s=i.sec1Rows*i.tileHeight;i.img.ctx.save(),i.img.ctx.translate(e,s),u(i.img.ctx,h[2*l],a[l],t),i.img.ctx.restore(),i.img.ctx.save(),i.img.ctx.translate(e,s+i.tileHeight),u(i.img.ctx,h[2*l+1],a[l],t),i.img.ctx.restore()}return i}(H.scale),H.tw=H.tileset.tileWidth,H.th=H.tileset.tileHeight,H.offscreen=s(H.tilesH*H.tw,H.tilesV*H.th),H.cam={},H.cam.baseHaight=H.offscreen.height,H.cam.x=Math.floor(H.offscreen.width/2),H.cam.y=Math.floor(H.offscreen.height/2),H.players=[],H.platforms=[],H.trees=[];for(var L=0;L<4;L++){let t=H.cam.x+5*(L-2)*H.tw+H.tw,e=(H.tilesV-4)*H.th;H.players[L]={active:0===L,x:t+H.tw,y:e-H.th,jumping:!1,vy:-40,img:g(L,H.tileset)},H.platforms[L]={x:t,y:e,img:d(L,H.tileset)},H.trees[L]={x:t+H.tw,y:e-13*H.tw,segments:12,img:m(L,12,H.tileset)}}function S(){H.screen=s(window.innerWidth,window.innerHeight,\"screen\"),H.screen.ctx.fillStyle=H.bg,H.screen.ctx.fillRect(0,0,H.screen.width,H.screen.height);let t=H.cam;t.height=t.baseHaight,t.width=t.height*H.screen.width/H.screen.height,t.halfHeight=t.height/2,t.halfWidth=t.width/2,t.sx=t.x-t.halfWidth,t.sy=t.y-t.halfHeight,t.sw=t.width,t.sh=t.height,t.dx=0,t.dy=0,t.dw=H.screen.width,t.dh=H.screen.height}document.addEventListener(\"keypress\",(function(t){\"Space\"===t.code&&(e=0,H.trees[e].segments>1&&(H.trees[e].segments-=1,H.trees[e].y+=H.tw));var e})),window.addEventListener(\"resize\",S),S(),H.state=new b(H),H.loop=new p(H.state),H.loop.start()}]);","extractedComments":[]}