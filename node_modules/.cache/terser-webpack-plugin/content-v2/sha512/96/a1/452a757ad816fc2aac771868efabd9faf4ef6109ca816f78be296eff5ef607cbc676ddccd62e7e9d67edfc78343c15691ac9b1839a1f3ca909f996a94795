{"code":"!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";function s(t,e,i){const s=i?document.getElementById(i):document.createElement(\"canvas\");return s.width=t,s.height=e,s.ctx=s.getContext(\"2d\"),s}i.r(e);const a=[[\"#dd4e54\",\"#ff5960\",\"#4b3733\",\"#5d433e\",\"#ead94c\",\"#4a3632\"],[\"#2c5460\",\"#3a7080\",\"#2c5460\",\"#67bd39\",\"#bcdc2f\",\"#59a331\"],[\"#2184d5\",\"#3399cc\",\"#10456d\",\"#3a4750\",\"#f3f3f3\",\"#303841\"],[\"#ffd944\",\"#ffe580\",\"#d7c745\",\"#49b47e\",\"#94dd4d\",\"#409f6e\"]],n=12,r=13,h=14,c=[[[\"M 0 0 16 0 16 16 0 16\",0]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 3 8, A 5 5 0 1 1 13 8, A 5 5 0 1 1 3 8\",4],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",3]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 5 8, A 3 3 0 1 1 11 8, A 3 3 0 1 1 5 8\",4]],[[\"M 0 0 16 0 16 16 0 16\",3],[\"M 3 8, A 5 5 0 1 1 13 8, A 5 5 0 1 1 3 8\",4],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",3],[\"M 5 8, A 3 3 0 1 1 11 8, A 3 3 0 1 1 5 8\",4]],[[\"M 0 0 16 0 16 16 0 16\",1],[\"M 0 1 16 1 16 16 0 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 4, A 4 4 0 0 1 4 0, L 16 0 16 16 0 16\",1],[\"M 1 4, A 3 3 0 0 1 4 1, L 16 1 16 16 1 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 12 0, A 4 4 0 0 1 16 4, L 16 16 0 16 0 0\",1],[\"M 12 1, A 3 3 0 0 1 15 4, L 15 16 0 16 0 1\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 4, A 4 4 0 0 1 4 0, L 12 0, A 4 4 0 0 1 16 4, L 16 16 0 16\",1],[\"M 1 4, A 3 3 0 0 1 4 1, L 12 1, A 3 3 0 0 1 15 4, L 15 16 1 16\",0],[\"M 0 6 4 4 8 6 12 4 16 6 16 16 0 16\",4],[\"M 0 8 4 6 8 8 12 6 16 8 16 16 0 16\",3],[\"M 0 12 4 10 8 12 12 10 16 12 16 16 0 16\",5]],[[\"M 0 16 16 0 16 16\",1],[\"M 1 16 16 1 16 16\",0],[\"M 6 16 16 6 16 16\",4],[\"M 8 16 16 8 16 16\",3],[\"M 12 16 16 12 16 16\",5]],[[\"M 0 0 0 0 16 0 16 16 0 16\",1],[\"M 0 1 1 0 16 0 16 16 0 16\",0],[\"M 0 6 6 0 16 0 16 16 0 16\",4],[\"M 0 8 8 0 16 0 16 16 0 16\",3],[\"M 0 12 12 0 16 0 16 16 0 16\",5]],[[\"M 0 0 16 16 0 16\",1],[\"M 0 1 15 16 0 16\",0],[\"M 0 6 10 16 0 16\",4],[\"M 0 8 8 16 0 16\",3],[\"M 0 12 4 16 0 16\",5]],[[\"M 0 0 0 0 16 0 16 16 0 16\",1],[\"M 15 0 16 1 16 16 0 16 0 0\",0],[\"M 10 0 16 6 16 16 0 16 0 0\",4],[\"M 8 0 16 8 16 16 0 16 0 0\",3],[\"M 4 0 16 12 16 16 0 16 0 0\",5]],[[\"M 0 2, Q 4 0 8 2, Q 12 4 16 2, L 16 16 0 16\",4],[\"M 0 3, Q 4 1 8 3, Q 12 5 16 3, L 16 16 0 16\",1],[\"M 0 8, Q 4 6 8 8, Q 12 10 16 8, L 16 16 0 16\",0]],[[\"M 7 8 9 8 9 16 7 16\",5],[\"M 5 9, A 3 6 0 1 1 11 9, A 3 4 0 1 1 5 9\",1],[\"M 8 16, A 6 6 0 0 0 14 10, L 8 14\",5],[\"M 8 15, A 6 6 0 0 1 2 8, L 8 13\",5]],[[\"M 7 0 9 0 9 16 7 16\",5]]],o=[[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 5 8, A 1 1 0 1 1 7 8, A 1 1 0 1 1 5 8, M 9 8, A 1 1 0 1 1 11 8, A 1 1 0 1 1 9 8\",4]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8, A 1 1 0 1 1 7 8, M 9 8, A 1 1 0 1 1 11 8\",4]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 5 8, A 1 1 0 1 1 7 8, A 1 1 0 1 1 5 8, M 9 8, A 1 1 0 1 1 11 8, A 1 1 0 1 1 9 8\",4]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8, A 1 1 0 1 1 7 8, M 9 8, A 1 1 0 1 1 11 8\",4]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8, A 1 1 0 1 1 7 8\",5]],[[\"M 3 10, A 5 8 0 1 1 13 10, A 5 3 0 1 1 3 10\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8\",5]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 5 8 7 8 7 16 5 16\",1],[\"M 9 8 11 8 11 16 9 16\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8, A 1 1 0 1 1 7 8\",5]],[[\"M 3 10, A 5 5 0 1 1 13 10, A 5 5 0 1 1 3 10\",1],[\"M 4 8, A 4 4 0 1 1 12 8, A 4 4 0 1 1 4 8\",4],[\"M 7 8, A 1 1 0 1 1 9 8\",5]]];let l=[5,4,6];function d(t,e){let i=s(e.tileWidth*l.length,e.tileHeight);for(var a in l){let s=t*e.tileWidth,n=l[a]*e.tileHeight,r=a*e.tileWidth,h=0;i.ctx.drawImage(e.img,s,n,e.tileWidth,e.tileHeight,r,h,e.tileWidth,e.tileHeight)}return i}function g(t,e,i){let a=i.tileWidth,n=i.tileHeight,c=s(a,n*(e+1)),o=t*a,l=r*n;c.ctx.drawImage(i.img,o,l,a,n,0,0,a,n),l=h*n;for(var d=0;d<e;d++)c.ctx.drawImage(i.img,o,l,a,n,0,(1+d)*n,a,n);return c}function m(t,e,i){return\"A\"===t?t+e.map((t,e)=>e<2||e>4?t*i:t).join(\" \"):t+e.map(t=>t*i).join(\" \")}function f(t,e,i,s){t.fillStyle=i;let a=e.split(\",\");for(var n=0;n<a.length;n++){let t=a[n].trim().split(\" \"),e=t.shift();a[n]=m(e,t,s)}t.fill(new Path2D(a.join(\" \")))}function u(t,e,i,s){for(var a in e)f(t,e[a][0],i[e[a][1]],s)}class M{constructor(t){this.raf=null,this.setState(t)}setState(t){this.state=t}start(){this.now=performance.now(),this.last=this.now,this.elapsed=0,this.accumulator=0,requestAnimationFrame(this.update.bind(this))}stop(){cancelAnimationFrame(this.raf)}update(){if(this.raf=requestAnimationFrame(this.update.bind(this)),this.now=performance.now(),this.elapsed=this.now-this.last,this.last=this.now,!(this.elapsed>1e3)){for(this.state.prepare(),this.accumulator+=this.elapsed;this.accumulator>=1e3/60;)this.state.update(1/60*20),this.accumulator-=1e3/60;this.state.render()}}}let p=\"ongamepadconnected\"in window,w=[];const x={standard:[\"A\",\"B\",\"X\",\"Y\",\"L1\",\"R1\",\"L2\",\"R2\",\"SELECT\",\"START\",\"ANALOG1\",\"ANALOG2\",\"UP\",\"DOWN\",\"LEFT\",\"RIGHT\",\"MODE\"]};function A(t){v(t.gamepad),console.log(\"Gamepad %i connected\",t.gamepad.index)}function v(t){w[t.index]={device:t,mapping:x[t.mapping]||x.standard,cache:[],status:[]}}function y(t){delete w[t.gamepad.index],console.log(\"Gamepad %i disconnected\",t.gamepad.index)}function b(){for(var t in p||function(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];for(var e=0;e<t.length;e++)t[e]&&(t[e].index in w?w[t[e].index].device=t[e]:v(t[e]))}(),w){let i=w[t];i.cache=[...i.status],i.status=[];for(var e=0;e<i.device.buttons.length;e++)i.device.buttons[e].pressed&&i.status.push(i.mapping[e])}}function H(t,e=!1,i=0){if(!w[i])return!1;let s=w[i];t=t.toUpperCase();let a=s.status.includes(t);return!e&&s.cache.includes(t)&&(a=!1),a}class L{constructor(t){window.addEventListener(\"gamepadconnected\",A),window.addEventListener(\"gamepaddisconnected\",y),this.buttons=[],this.game=t,this.waveSpeed=100;let e=this.game,i={tilesX:Math.ceil(e.offscreen.width/e.tw),tilesY:20};i.img=s(i.tilesX*e.tw,i.tilesY*e.th),i.img.ctx.fillStyle=a[e.colors][0],i.img.ctx.fillRect(0,e.th,i.img.width,i.img.height);for(var r=0;r<i.tilesX;r++){let t=e.colors*e.tw,s=n*e.th,a=r*e.tw,h=0;i.img.ctx.drawImage(e.tileset.img,t,s,e.tw,e.th,a,h,e.tw,e.th)}this.wave=i,this.waveX=0,this.waveY=e.offscreen.height-i.img.height,this.game.cam.s=this.game.cam.scale,this.shake=0}prepare(){}setButton(t){this.chopTree(t.index)}chopTree(t){this.game.players[t].active=!0;let e=this.game.trees[t];e.segments>1&&(e.segments-=1,e.y+=this.game.th),this.game.players[0].jump(),this.game.state.shake=1}update(t){let e=this.game.cam;var i;e.s-=.05*t,e.s<1&&(e.s=1),e.scale=(i=e.s,1+--i*i*i*i*i),this.shake>0?(e.dx=4-8*Math.random(),e.dy=4-8*Math.random(),this.shake-=t):(e.dx=0,e.dy=0),1===this.game.trees[0].segments&&(e.dx=16-32*Math.random(),e.dy=16-32*Math.random()),this.shake<0&&(this.shake=0),b(),function(t){for(var e in w){let s=w[e];for(var i in s.mapping){let a=s.mapping[i];H(a,!1,e)&&t({index:e,button:a})}}}(this.setButton.bind(this));for(var s=0;s<4;s++){let e=this.game.players[s];e.active&&(e.update(t),e.y>this.game.platforms[s].y-this.game.th&&(e.y=this.game.platforms[s].y-this.game.th,e.vr=0,e.r=0,!0===e.jumping&&(e.jumping=!1,this.shake=1)))}}render(){let t=this.game,e=t.offscreen,i=t.cam;e.ctx.clearRect(0,0,e.width,e.height),e.ctx.drawImage(this.wave.img,this.waveX,this.waveY);for(var s=0;s<4;s++){e.ctx.save(),!1===t.players[s].active&&(e.ctx.globalAlpha=.5),e.ctx.drawImage(t.platforms[s].img,t.platforms[s].x,t.platforms[s].y);let i=t.trees[s].img.width,a=(t.trees[s].segments+1)*t.th,n=t.trees[s].x,r=t.trees[s].y;if(e.ctx.drawImage(t.trees[s].img,0,0,i,a,n,r,i,a),this.game.players[s].render(e.ctx),this.buttons[s]){e.ctx.fillStyle=\"#ffffff\",e.ctx.font=\"90px Arial\";let t=this.buttons[s],h=e.ctx.measureText(t).width;e.ctx.fillText(t,n+i/2-h/2,r+a/2)}e.ctx.restore()}t.screen.ctx.clearRect(0,0,t.screen.width,t.screen.height),t.screen.ctx.save(),t.screen.ctx.translate(t.screen.width/2,t.screen.height/2),t.screen.ctx.rotate(i.r*Math.PI/180),t.screen.ctx.scale(i.scale,i.scale),t.screen.ctx.drawImage(e,-i.x-i.dx,-i.y-i.dy),t.screen.ctx.restore()}}let W=new(top.AudioContext||webkitAudioContext);const j=(...t)=>{let e=W.createBufferSource(),i=W.createBuffer(t.length,t[0].length,44100);return t.map((t,e)=>i.getChannelData(e).set(t)),e.buffer=i,e.connect(W.destination),e.start(),e},I=(t=1,e=.05,i=220,s=0,a=0,n=.1,r=0,h=1,c=0,o=0,l=0,d=0,g=0,m=0,f=0,u=0,M=0,p=1,w=0,x=0)=>{let A,v,y=2*Math.PI,b=c*=500*y/44100**2,H=(0<f?1:-1)*y/4,L=i*=(1+2*e*Math.random()-e)*y/44100,W=[],j=0,I=0,S=0,R=1,T=0,k=0,G=0;for(o*=500*y/44100**3,f*=y/44100,l*=y/44100,d*=44100,g=44100*g|0,v=(s=99+44100*s)+(w*=44100)+(a*=44100)+(n*=44100)+(M*=44100)|0;S<v;W[S++]=G)++k%(100*u|0)||(G=r?1<r?2<r?3<r?Math.sin((j%y)**3):Math.max(Math.min(Math.tan(j),1),-1):1-(2*j/y%2+2)%2:1-4*Math.abs(Math.round(j/y)-j/y):Math.sin(j),G=(g?1-x+x*Math.sin(2*Math.PI*S/g):1)*(0<G?1:-1)*Math.abs(G)**h*t*.25*(S<s?S/s:S<s+w?1-(S-s)/w*(1-p):S<s+w+a?p:S<v-M?(v-S-M)/n*p:0),G=M?G/2+(M>S?0:(S<v-M?1:(v-S)/M)*W[S-M|0]/2):G),A=(i+=c+=o)*Math.sin(I*f-H),j+=A-A*m*(1-1e9*(Math.sin(S)+1)%2),I+=A-A*m*(1-1e9*(Math.sin(S)**2+1)%2),R&&++R>d&&(i+=l,L+=l,R=0),!g||++T%g||(i=L,c=b,R=R||1);return W},S=[1,9.1,75,.03,.08,.17,1,1.88,7.83,0,0,0,0,.4];class R{constructor(t,e,i,a){this.active=!1,this.x=e,this.y=i,this.ax=0,this.ay=0,this.vx=0,this.vy=0,this.g=9.8,this.r=0,this.vr=0,this.jumping=!1,this.jumps=0,this.img=function(t,e){let i=s(e.tileWidth,e.tileHeight),a=t*e.tileWidth,n=e.sec1Rows*e.tileHeight;return i.ctx.drawImage(e.img,a,n,e.tileWidth,e.tileHeight,0,0,e.tileWidth,e.tileHeight),i}(t,a),this.anchorX=this.img.width/2,this.anchorY=this.img.height/2}update(t){this.vy+=(this.ay+this.g)*t,this.vx+=this.ax*t,this.x+=this.vx*t,this.y+=this.vy*t,this.r+=this.vr*t}jump(){this.jumping||(this.vy=-50,this.vr=35,this.jumping=!0),((...t)=>{j(I(...t))})(...S)}render(t){t.save(),t.translate(this.x+this.anchorX,this.y+this.anchorY),t.rotate(this.r*Math.PI/180),t.translate(-this.anchorX,-this.anchorY),t.drawImage(this.img,0,0),t.restore()}}const T={};T.colors=Math.floor(4*Math.random()),T.bg=\"#52427a\",T.scale=2.25,T.tilesH=56,T.tilesV=48;T.tileset=function(t){let e=a.length,i={tileWidth:16*t,tileHeight:16*t,columns:e,sec1Rows:c.length,sec2Rows:o.length/4};i.width=i.tileWidth*i.columns,i.rows=i.sec1Rows+i.sec2Rows,i.height=i.tileHeight*i.rows,i.img=s(i.width,i.height);for(var n=0;n<c.length;n++)for(var r=0;r<e;r++){let e=r*i.tileWidth,s=n*i.tileHeight;i.img.ctx.save(),i.img.ctx.translate(e,s),u(i.img.ctx,c[n],a[r],t),i.img.ctx.restore()}for(var h=0;h<4;h++){let e=h*i.tileWidth,s=i.sec1Rows*i.tileHeight;i.img.ctx.save(),i.img.ctx.translate(e,s),u(i.img.ctx,o[2*h],a[h],t),i.img.ctx.restore(),i.img.ctx.save(),i.img.ctx.translate(e,s+i.tileHeight),u(i.img.ctx,o[2*h+1],a[h],t),i.img.ctx.restore()}return i}(T.scale),T.tw=T.tileset.tileWidth,T.th=T.tileset.tileHeight,T.offscreen=s(T.tilesH*T.tw,T.tilesV*T.th),T.cam={},T.cam.baseHaight=T.offscreen.height,T.cam.x=Math.floor(T.offscreen.width/2),T.cam.y=Math.floor(T.offscreen.height/2),T.cam.r=0,T.cam.scale=2,T.players=[],T.platforms=[],T.trees=[];for(var k=0;k<4;k++){let t=T.cam.x+5*(k-2)*T.tw+T.tw,e=(T.tilesV-22)*T.th;T.players[k]=new R(k,t+T.tw,e-T.th,T.tileset),T.platforms[k]={x:t,y:e,img:d(k,T.tileset)},T.trees[k]={x:t+T.tw,y:e-13*T.tw,segments:12,img:g(k,12,T.tileset)}}function G(){T.screen=s(window.innerWidth,window.innerHeight,\"screen\"),T.screen.ctx.fillStyle=T.bg,T.screen.ctx.fillRect(0,0,T.screen.width,T.screen.height);let t=T.cam;t.height=t.baseHaight,t.width=t.height*T.screen.width/T.screen.height,t.halfHeight=t.height/2,t.halfWidth=t.width/2,t.sx=t.x-t.halfWidth,t.sy=t.y-t.halfHeight,t.sw=t.width,t.sh=t.height,t.dx=0,t.dy=0,t.dw=T.screen.width,t.dh=T.screen.height}T.cam.y=T.players[0].y-4*T.th,document.addEventListener(\"keypress\",(function(t){\"Space\"===t.code&&T.state.chopTree(0)})),window.addEventListener(\"resize\",G),G(),T.state=new L(T),T.loop=new M(T.state),T.loop.start()}]);","extractedComments":[]}